<div class="register-container">
  <form (ngSubmit)="register()" class="register-form">
    <button mat-icon-button class="close-button" (click)="cancel()">
      <mat-icon>close</mat-icon>
    </button>
    <h1>Register New User</h1>
    <mat-form-field>
      <mat-label>Username</mat-label>
      <input
        matInput
        [(ngModel)]="username"
        name="username"
        required
        minlength="3"
        maxlength="20"
      />
    </mat-form-field>
    <mat-form-field>
      <mat-label>Password</mat-label>
      <input
        matInput
        [(ngModel)]="password"
        name="password"
        type="password"
        required
        maxlength="12"
      />
    </mat-form-field>
    <h2>Dashboard Customization</h2>
    <mat-form-field>
      <mat-label>Title</mat-label>
      <input matInput [(ngModel)]="title" name="title" required />
    </mat-form-field>
    <mat-form-field>
      <mat-label>Budget Value</mat-label>
      <input
        matInput
        type="text"
        [(ngModel)]="budgetValue"
        name="budgetValue"
        currencyMask
        [options]="{ prefix: '$', thousands: ',', decimal: '.', precision: 2 }"
        required
      />
    </mat-form-field>
    <!-- Background Color -->
    <label>Background Color</label>
    <swiper-container
      #backgroundColorSwiper
      effect="cards"
      grab-cursor="true"
      class="color-swiper"
    >
      <swiper-slide
        class="color-swiper-slide"
        *ngFor="let color of backgroundColors"
      >
        <div class="color-slide" [style.background]="color.description"></div>
      </swiper-slide>
    </swiper-container>
    <!-- Title Color -->
    <label>Title Color</label>
    <swiper-container
      #titleColorSwiper
      effect="cards"
      grab-cursor="true"
      class="color-swiper"
    >
      <swiper-slide
        class="color-swiper-slide"
        *ngFor="let color of titleColors"
      >
        <div class="color-slide" [style.background]="color.description"></div>
      </swiper-slide>
    </swiper-container>
    <!-- Font Family -->
    <label>Font Family</label>
    <swiper-container
      #fontFamilySwiper
      pagination="true"
      effect="coverflow"
      grab-cursor="true"
      centered-slides="true"
      slides-per-view="auto"
      coverflow-effect-rotate="70"
      coverflow-effect-stretch="40"
      coverflow-effect-depth="100"
      coverflow-effect-modifier="1"
      coverflow-effect-slide-shadows="false"
      class="font-gif-swiper"
    >
      <swiper-slide
        class="font-gif-swiper-slide"
        *ngFor="let font of fontFamilies"
      >
        <div class="font-slide" [style.--font-family]="font.description">
          {{ extractFontName(font.description) }}
        </div>
      </swiper-slide>
    </swiper-container>
    <!-- Budget GIF -->
    <label>Budget GIF</label>
    <mat-radio-group
      [(ngModel)]="budgetGifOption"
      name="budgetGifOption"
    >
      <mat-radio-button value="text">Input Text</mat-radio-button>
      <mat-radio-button value="gif">Select GIF</mat-radio-button>
    </mat-radio-group>

    <div *ngIf="budgetGifOption === 'text'">
      <mat-form-field>
        <mat-label>Budget GIF Text</mat-label>
        <input
          matInput
          [(ngModel)]="budgetGifText"
          name="budgetGifText"
          maxlength="14"
        />
      </mat-form-field>
    </div>

    <div *ngIf="budgetGifOption === 'gif'">
      <swiper-container
        #budgetGifSwiper
        pagination="true"
        effect="coverflow"
        grab-cursor="true"
        centered-slides="true"
        slides-per-view="auto"
        coverflow-effect-rotate="70"
        coverflow-effect-stretch="0"
        coverflow-effect-depth="100"
        coverflow-effect-modifier="1"
        coverflow-effect-slide-shadows="true"
        class="font-gif-swiper"
      >
        <swiper-slide
          class="font-gif-swiper-slide"
          *ngFor="let gif of budgetGifs"
        >
          <div
            class="gif-slide"
            [style.backgroundImage]="'url(' + gif.url + ')'"
          ></div>
        </swiper-slide>
      </swiper-container>
    </div>
    <!-- Background GIF -->
    <label>Background GIF</label>
    <swiper-container
      #backgroundGifSwiper
      pagination="true"
      effect="coverflow"
      grab-cursor="true"
      centered-slides="true"
      slides-per-view="auto"
      coverflow-effect-rotate="70"
      coverflow-effect-stretch="0"
      coverflow-effect-depth="100"
      coverflow-effect-modifier="1"
      coverflow-effect-slide-shadows="true"
      class="font-gif-swiper"
    >
      <swiper-slide
        class="font-gif-swiper-slide"
        *ngFor="let gif of backgroundGifs"
      >
        <div
          class="gif-slide"
          [style.backgroundImage]="'url(' + gif.url + ')'"
        ></div>
      </swiper-slide>
    </swiper-container>
    <button mat-raised-button color="primary" type="submit">Save</button>
    <button mat-raised-button color="warn" type="button" (click)="cancel()">
      Cancel
    </button>
    <div *ngIf="errorMessage" class="error-message">
      <span>{{ errorMessage }}</span>
    </div>
  </form>
</div>
